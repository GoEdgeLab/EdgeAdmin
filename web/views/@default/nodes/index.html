{$layout}
{$template "menu"}

<p class="comment" v-if="nodes.length == 0">暂时还没有节点。</p>

<table class="ui table selectable" v-if="nodes.length > 0">
	<thead>
		<tr>
			<th>ID</th>
			<th>节点名称</th>
			<th>主机名</th>
			<th>IP</th>
			<th>所属集群</th>
			<th>状态</th>
			<th>CPU</th>
			<th>内存</th>
			<!--<th>流量</th>
			<th>连接数</th>-->
			<th class="two op">操作</th>
		</tr>
	</thead>
	<tr v-for="node in nodes">
		<td>{{node.id}}</td>
		<td>{{node.name}}</td>
		<td>
			<span v-if="node.status.hostname != null && node.status.hostname.length > 0">{{node.status.hostname}}</span>
			<span v-else>-</span>
		</td>
		<td>
			<span v-if="node.ipAddresses.length == 0">-</span>
			<div v-else class="address-box">
				<div v-for="addr in node.ipAddresses" class="ui label small">{{addr.ip}} <span class="small">（{{addr.name}}）</span></div>
			</div>
		</td>
		<td>{{node.cluster.name}}</td>
		<td>
			<span v-if="node.status.isActive"><span class="green">运行中</span></span>
			<span v-else-if="node.status.updatedAt > 0" class="red">已断开</span>
			<span v-else-if="node.status.updatedAt == 0" class="red">未连接</span>
		</td>
		<td>
			<span v-if="node.status.isActive" :class="{red:node.status.cpuUsage > 0.80}">{{node.status.cpuUsageText}}</span>
			<span v-else>-</span>
		</td>
		<td>
			<span v-if="node.status.isActive" :class="{red:node.status.memUsage > 0.80}">{{node.status.memUsageText}}</span>
			<span v-else>-</span>
		</td>
		<td>
			<a :href="'/nodes/node?nodeId=' + node.id">详情</a> &nbsp; <a href="" @click.prevent="deleteNode(node.id)">删除</a>
		</td>
	</tr>
</table>


<div class="page" v-html="page"></div>